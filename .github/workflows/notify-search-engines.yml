name: Site Update Notifications

on:
  push:
    branches:
      - main
    paths:
      - '_properties/**'
      - '_requests/**'
      - 'sitemap.xml'
      - 'luxury-gallery.html'
      - 'search-data.json'

jobs:
  site-checks:
    runs-on: ubuntu-latest
    steps:
      - name: Verify Gallery Page
        run: |
          # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙØ­Ø© Ø§Ù„Ù…Ø¹Ø±Ø¶
          echo "ğŸ” Checking luxury-gallery.html..."
          STATUS=$(curl -s -o /dev/null -w "%{http_code}" https://nasr-realestate.github.io/luxury-gallery.html)
          if [ "$STATUS" -eq 200 ]; then
            echo "âœ… luxury-gallery.html is accessible (Status: $STATUS)"
          else
            echo "âš ï¸ luxury-gallery.html returned status: $STATUS"
          fi

      - name: Verify Search Data
        run: |
          # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù…Ù„Ù Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ø­Ø«
          echo "ğŸ” Checking search-data.json..."
          STATUS=$(curl -s -o /dev/null -w "%{http_code}" https://nasr-realestate.github.io/search-data.json)
          if [ "$STATUS" -eq 200 ]; then
            echo "âœ… search-data.json is accessible (Status: $STATUS)"
          else
            echo "âš ï¸ search-data.json returned status: $STATUS"
          fi

      - name: Verify Sitemap
        run: |
          # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹
          echo "ğŸ” Checking sitemap.xml..."
          STATUS=$(curl -s -o /dev/null -w "%{http_code}" https://nasr-realestate.github.io/sitemap.xml)
          if [ "$STATUS" -eq 200 ]; then
            echo "âœ… sitemap.xml is accessible (Status: $STATUS)"
          else
            echo "âš ï¸ sitemap.xml returned status: $STATUS"
          fi

      - name: Notify Google
        run: |
          # Ø¥Ø¹Ù„Ø§Ù… Ø¬ÙˆØ¬Ù„ ÙÙ‚Ø· (Ø¨Ø¯ÙˆÙ† Ø¨ÙŠÙ†Øº)
          echo "ğŸ”„ Notifying Google about sitemap update..."
          curl -s "https://www.google.com/ping?sitemap=https://nasr-realestate.github.io/sitemap.xml"
          echo "âœ… Google has been notified!"
