---
layout: null
permalink: /measure/
---
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø£Ø¯Ø§Ø© Ø§Ù„Ù‚ÙŠØ§Ø³ | Ø³Ù…Ø³Ø§Ø± Ø·Ù„Ø¨Ùƒ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            color: white;
            overflow: hidden;
            width: 100vw;
            height: 100vh;
        }

        /* Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: opacity 0.5s;
        }

        .loader {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(212, 175, 55, 0.3);
            border-top: 4px solid #d4af37;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Ø´Ø§Ø´Ø© Ø§Ù„Ø®Ø·Ø£ */
        #error-screen {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            color: white;
            z-index: 999;
            text-align: center;
            padding: 20px;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .error-icon {
            font-size: 4rem;
            color: #d4af37;
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .retry-btn {
            background: linear-gradient(45deg, #d4af37, #ffd700);
            color: #000;
            border: none;
            border-radius: 50px;
            padding: 12px 35px;
            font-family: 'Cairo';
            font-weight: bold;
            font-size: 16px;
            margin-top: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.4);
        }

        /* Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
        #ui-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .ui-element {
            pointer-events: auto;
        }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
        .header {
            background: linear-gradient(to bottom, rgba(0,0,0,0.9), transparent);
            padding: 15px 20px;
            text-align: center;
        }

        .title {
            color: #d4af37;
            font-size: 1.3rem;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .status {
            background: rgba(212, 175, 55, 0.9);
            color: #000;
            padding: 6px 18px;
            border-radius: 25px;
            font-weight: bold;
            display: inline-block;
            margin-top: 8px;
            font-size: 0.9rem;
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
        }

        /* Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø© */
        .result-card {
            background: rgba(15, 15, 15, 0.95);
            border: 2px solid #d4af37;
            border-radius: 20px;
            padding: 20px;
            margin: 20px;
            text-align: center;
            backdrop-filter: blur(10px);
            display: none;
        }

        .distance-value {
            font-size: 2.8rem;
            color: #d4af37;
            font-weight: 900;
            line-height: 1;
            margin: 10px 0;
        }

        .distance-unit {
            color: #aaa;
            font-size: 0.9rem;
            margin-bottom: 15px;
        }

        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… */
        .controls {
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
        }

        .control-btn {
            background: rgba(30, 30, 30, 0.9);
            border: 2px solid #d4af37;
            color: white;
            padding: 12px 30px;
            border-radius: 50px;
            font-family: 'Cairo';
            font-weight: bold;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            width: 250px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .control-btn:hover {
            background: #d4af37;
            color: #000;
            transform: translateY(-2px);
        }

        .control-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            border-color: #666;
        }

        /* ØªÙ„Ù…ÙŠØ­Ø§Øª */
        .hint {
            color: #aaa;
            font-size: 0.8rem;
            text-align: center;
            padding: 0 20px;
            margin-bottom: 10px;
        }

        /* Canvas */
        #ar-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        /* Ø¹Ù„Ø§Ù…Ø© AR */
        .ar-marker {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 40px;
            border: 3px solid rgba(212, 175, 55, 0.8);
            border-radius: 50%;
            pointer-events: none;
            z-index: 1;
            display: none;
        }

        .ar-marker::before {
            content: '';
            position: absolute;
            top: 5px;
            left: 5px;
            right: 5px;
            bottom: 5px;
            border: 2px solid rgba(212, 175, 55, 0.5);
            border-radius: 50%;
        }

        /* Ù…ØªØµÙØ­ ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ… */
        #unsupported {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            color: white;
            z-index: 2000;
            text-align: center;
            padding: 40px 20px;
        }
    </style>
</head>
<body>
    <!-- Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ -->
    <div id="loading-screen">
        <div class="loader"></div>
        <h3 style="color:#d4af37; margin: 15px 0;">Ø¬Ø§Ø±ÙŠ Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…ØªØ± Ø§Ù„Ø°ÙƒÙŠ</h3>
        <p id="loading-text">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¯Ø¹Ù… Ø§Ù„Ø¬Ù‡Ø§Ø²...</p>
    </div>

    <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø®Ø·Ø£ -->
    <div id="error-screen">
        <i class="fas fa-exclamation-triangle error-icon"></i>
        <h2>ØªØ¹Ø°Ø± ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§</h2>
        <p id="error-details">ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</p>
        
        <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; margin: 20px 0; text-align: right;">
            <h4><i class="fas fa-lightbulb"></i> Ø®Ø·ÙˆØ§Øª Ø§Ù„Ø­Ù„:</h4>
            <ul style="list-style: none; padding: 0; margin: 10px 0;">
                <li><i class="fas fa-check-circle"></i> Ø§Ø³ØªØ®Ø¯Ù… Ù…ØªØµÙØ­ <strong>Chrome</strong> Ø¹Ù„Ù‰ Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯</li>
                <li><i class="fas fa-check-circle"></i> Ù‚Ù… Ø¨Ø²ÙŠØ§Ø±Ø© <strong>https://samisirk.com/measure/</strong></li>
                <li><i class="fas fa-check-circle"></i> Ø§Ø³Ù…Ø­ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø¹Ù†Ø¯ Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø©</li>
                <li><i class="fas fa-check-circle"></i> ØªØ£ÙƒØ¯ Ù…Ù† Ø¯Ø¹Ù… Ø¬Ù‡Ø§Ø²Ùƒ Ù„Ù„ÙˆØ§Ù‚Ø¹ Ø§Ù„Ù…Ø¹Ø²Ø²</li>
            </ul>
        </div>
        
        <button class="retry-btn" onclick="checkCompatibility()">
            <i class="fas fa-redo"></i> Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©
        </button>
        
        <p style="margin-top: 20px; font-size: 0.8rem; color: #888;">
            Ø¥Ø°Ø§ Ø§Ø³ØªÙ…Ø±Øª Ø§Ù„Ù…Ø´ÙƒÙ„Ø©ØŒ Ø¬Ø±Ø¨ <a href="/" style="color: #d4af37;">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
        </p>
    </div>

    <!-- Ù…ØªØµÙØ­ ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ… -->
    <div id="unsupported">
        <i class="fas fa-times-circle" style="font-size: 4rem; color: #d4af37; margin-bottom: 20px;"></i>
        <h2>Ø§Ù„Ù…ØªØµÙØ­ ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…</h2>
        <p>Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø£Ù…Ø«Ù„ØŒ ÙŠØ±Ø¬Ù‰ ØªØ­Ù…ÙŠÙ„:</p>
        <div style="margin: 20px 0;">
            <a href="https://play.google.com/store/apps/details?id=com.android.chrome" 
               style="background: #d4af37; color: #000; padding: 10px 20px; border-radius: 25px; text-decoration: none; display: inline-block; margin: 5px;">
                <i class="fab fa-chrome"></i> Chrome Ù„Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯
            </a>
        </div>
    </div>

    <!-- Ø¹Ù„Ø§Ù…Ø© AR -->
    <div class="ar-marker" id="ar-marker"></div>

    <!-- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
    <div id="ui-container">
        <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
        <div class="header ui-element">
            <h1 class="title"><i class="fas fa-ruler-combined"></i> Ø§Ù„Ù…ØªØ± Ø§Ù„Ø°ÙƒÙŠ</h1>
            <div class="status" id="status">Ø¬Ø§Ù‡Ø² Ù„Ù„ØªØ´ØºÙŠÙ„</div>
        </div>

        <!-- Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø© -->
        <div class="result-card ui-element" id="result-card">
            <div style="font-size: 0.9rem; color: #aaa;">Ø§Ù„Ù…Ø³Ø§ÙØ© Ø§Ù„Ù…Ù‚Ø§Ø³Ø©</div>
            <div class="distance-value" id="distance-value">0.00</div>
            <div class="distance-unit" id="distance-unit">Ù…ØªØ±</div>
            <button class="control-btn" onclick="resetMeasurement()" style="margin-top: 15px;">
                <i class="fas fa-redo"></i> Ù‚ÙŠØ§Ø³ Ø¬Ø¯ÙŠØ¯
            </button>
        </div>

        <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… -->
        <div class="controls ui-element">
            <div class="hint" id="hint">
                Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± "Ø¨Ø¯Ø¡ Ø§Ù„Ù‚ÙŠØ§Ø³" Ù„ÙØªØ­ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
            </div>
            
            <button class="control-btn" id="start-btn" onclick="startAR()">
                <i class="fas fa-camera"></i> Ø¨Ø¯Ø¡ Ø§Ù„Ù‚ÙŠØ§Ø³
            </button>
            
            <button class="control-btn" id="stop-btn" onclick="stopAR()" disabled>
                <i class="fas fa-stop"></i> Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù‚ÙŠØ§Ø³
            </button>
        </div>
    </div>

    <!-- Canvas Ù„Ø¹Ø±Ø¶ AR -->
    <canvas id="ar-canvas"></canvas>

    <!-- Ù…ÙƒØªØ¨Ø§Øª JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.160.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.160.0/examples/js/controls/OrbitControls.js"></script>
    
    <script>
        // ============= Ø¹Ù†Ø§ØµØ± DOM =============
        const loadingScreen = document.getElementById('loading-screen');
        const errorScreen = document.getElementById('error-screen');
        const unsupportedScreen = document.getElementById('unsupported');
        const loadingText = document.getElementById('loading-text');
        const errorDetails = document.getElementById('error-details');
        const statusElement = document.getElementById('status');
        const hintElement = document.getElementById('hint');
        const resultCard = document.getElementById('result-card');
        const distanceValue = document.getElementById('distance-value');
        const startBtn = document.getElementById('start-btn');
        const stopBtn = document.getElementById('stop-btn');
        const arMarker = document.getElementById('ar-marker');
        const canvas = document.getElementById('ar-canvas');

        // ============= Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ =============
        let scene, camera, renderer;
        let arSession = null;
        let isARActive = false;
        let points = [];
        let measurementLine = null;
        let reticle = null;
        
        // ============= ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ =============
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                // Ø§Ù„Ø®Ø·ÙˆØ© 1: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† HTTPS
                if (window.location.protocol !== 'https:') {
                    if (window.location.hostname !== 'localhost' && 
                        window.location.hostname !== '127.0.0.1') {
                        showError('ÙŠØ¬Ø¨ ÙØªØ­ Ø§Ù„ØµÙØ­Ø© Ø¹Ø¨Ø± HTTPS (https://...)');
                        return;
                    }
                }

                // Ø§Ù„Ø®Ø·ÙˆØ© 2: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¯Ø¹Ù… WebXR
                await checkCompatibility();
                
                // Ø§Ù„Ø®Ø·ÙˆØ© 3: Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
                setTimeout(() => {
                    loadingScreen.style.opacity = '0';
                    setTimeout(() => {
                        loadingScreen.style.display = 'none';
                    }, 500);
                }, 1000);

            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªÙ‡ÙŠØ¦Ø©:', error);
                showError(error.message);
            }
        });

        // ============= Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙˆØ§ÙÙ‚ =============
        async function checkCompatibility() {
            loadingText.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªÙˆØ§ÙÙ‚ Ø§Ù„Ø¬Ù‡Ø§Ø²...';
            
            try {
                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¯Ø¹Ù… WebGL
                if (!isWebGLSupported()) {
                    throw new Error('Ø¬Ù‡Ø§Ø²Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… WebGL (Ø§Ù„Ø¬Ø±Ø§ÙÙŠÙƒØ³ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…)');
                }

                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¯Ø¹Ù… WebXR
                if (!('xr' in navigator)) {
                    showUnsupportedBrowser();
                    return;
                }

                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¯Ø¹Ù… AR
                const isSupported = await navigator.xr.isSessionSupported('immersive-ar');
                if (!isSupported) {
                    throw new Error('Ø¬Ù‡Ø§Ø²Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø§Ù„ÙˆØ§Ù‚Ø¹ Ø§Ù„Ù…Ø¹Ø²Ø² (AR)');
                }

                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ ÙƒØ§Ù…ÙŠØ±Ø§
                if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
                    throw new Error('Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ØºÙŠØ± Ù…ØªÙˆÙØ±Ø© Ø£Ùˆ ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…Ø©');
                }

                // Ø§Ø®ØªØ¨Ø§Ø± Ø¥Ø°Ù† Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
                try {
                    const stream = await navigator.mediaDevices.getUserMedia({ video: true });
                    stream.getTracks().forEach(track => track.stop());
                } catch (camError) {
                    console.warn('ØªØ­Ø°ÙŠØ± Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§:', camError);
                    // Ù†Ø³ØªÙ…Ø± Ø±ØºÙ… Ø°Ù„ÙƒØŒ Ù‚Ø¯ ÙŠØ³Ù…Ø­ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ø§Ø­Ù‚Ø§Ù‹
                }

                // Ø¥Ø°Ø§ ÙˆØµÙ„Ù†Ø§ Ù‡Ù†Ø§ØŒ Ø§Ù„Ø¬Ù‡Ø§Ø² Ù…Ø¯Ø¹ÙˆÙ…
                loadingText.textContent = 'Ø§Ù„Ø¬Ù‡Ø§Ø² Ù…Ø¯Ø¹ÙˆÙ… âœ“ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©...';
                statusElement.textContent = 'Ø¬Ø§Ù‡Ø² Ù„Ù„Ù‚ÙŠØ§Ø³';
                hintElement.textContent = 'Ø§Ø¶ØºØ· "Ø¨Ø¯Ø¡ Ø§Ù„Ù‚ÙŠØ§Ø³" Ù„ÙØªØ­ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§';
                
                // ØªÙ‡ÙŠØ¦Ø© Three.js
                initThreeJS();
                
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù‚Ù‚:', error);
                showError(error.message);
            }
        }

        // ============= Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† WebGL =============
        function isWebGLSupported() {
            try {
                const canvas = document.createElement('canvas');
                return !!(window.WebGLRenderingContext && 
                    (canvas.getContext('webgl') || canvas.getContext('experimental-webgl')));
            } catch (e) {
                return false;
            }
        }

        // ============= ØªÙ‡ÙŠØ¦Ø© Three.js =============
        function initThreeJS() {
            try {
                // 1. Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø´Ù‡Ø¯
                scene = new THREE.Scene();
                scene.background = null;

                // 2. Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
                camera = new THREE.PerspectiveCamera(
                    70, 
                    window.innerWidth / window.innerHeight, 
                    0.01, 
                    100
                );

                // 3. Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù€ Renderer
                renderer = new THREE.WebGLRenderer({
                    canvas: canvas,
                    antialias: true,
                    alpha: true,
                    preserveDrawingBuffer: false
                });
                
                renderer.setPixelRatio(window.devicePixelRatio);
                renderer.setSize(window.innerWidth, window.innerHeight);
                renderer.xr.enabled = true;
                renderer.xr.setReferenceSpaceType('local');

                // 4. Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¥Ø¶Ø§Ø¡Ø©
                const ambientLight = new THREE.AmbientLight(0xffffff, 0.8);
                scene.add(ambientLight);

                const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);
                directionalLight.position.set(0, 1, 0);
                scene.add(directionalLight);

                // 5. Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø¤Ø´Ø± (Reticle)
                const ringGeometry = new THREE.RingGeometry(0.05, 0.08, 32);
                const ringMaterial = new THREE.MeshBasicMaterial({ 
                    color: 0x00ff00, 
                    transparent: true, 
                    opacity: 0.8 
                });
                
                reticle = new THREE.Mesh(ringGeometry, ringMaterial);
                reticle.rotation.x = -Math.PI / 2;
                reticle.matrixAutoUpdate = false;
                reticle.visible = false;
                scene.add(reticle);

                // 6. Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø³ØªÙ…Ø¹ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
                window.addEventListener('resize', onWindowResize);
                window.addEventListener('click', handleScreenTap);

                // 7. Ø¨Ø¯Ø¡ Ø§Ù„ØªØµÙŠÙŠØ±
                animate();

                console.log('âœ… Three.js ØªÙ… Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ø¨Ù†Ø¬Ø§Ø­');
                
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªÙ‡ÙŠØ¦Ø© Three.js:', error);
                showError('Ø®Ø·Ø£ ÙÙŠ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„Ø±Ø³ÙˆÙ…ÙŠ');
            }
        }

        // ============= Ø¯Ø§Ù„Ø© Ø¨Ø¯Ø¡ Ø¬Ù„Ø³Ø© AR =============
        async function startAR() {
            try {
                console.log('ğŸŸ¡ Ù…Ø­Ø§ÙˆÙ„Ø© Ø¨Ø¯Ø¡ Ø¬Ù„Ø³Ø© AR...');
                
                statusElement.textContent = 'Ø¬Ø§Ø±ÙŠ ÙØªØ­ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§...';
                hintElement.textContent = 'ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±...';
                startBtn.disabled = true;
                
                // Ø·Ù„Ø¨ Ø¥Ø°Ù† Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø£ÙˆÙ„Ø§Ù‹
                try {
                    console.log('Ø·Ù„Ø¨ Ø¥Ø°Ù† Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§...');
                    const stream = await navigator.mediaDevices.getUserMedia({ 
                        video: {
                            facingMode: { ideal: 'environment' },
                            width: { ideal: 1920 },
                            height: { ideal: 1080 }
                        }
                    });
                    
                    // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ù…Ø¨Ø§Ø´Ø±Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø°Ù†
                    stream.getTracks().forEach(track => {
                        track.stop();
                        console.log('ØªÙ… Ø¥ÙŠÙ‚Ø§Ù track:', track.kind);
                    });
                    
                    console.log('âœ… ØªÙ… Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥Ø°Ù† Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§');
                } catch (camError) {
                    console.warn('âš ï¸ ØªØ­Ø°ÙŠØ± Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§:', camError);
                    // Ù†Ø³ØªÙ…Ø± Ø±ØºÙ… Ø°Ù„ÙƒØŒ Ù‚Ø¯ ÙŠÙƒÙˆÙ† Ø§Ù„Ø¥Ø°Ù† Ù…Ù…Ù†ÙˆØ­Ø§Ù‹ Ù…Ø³Ø¨Ù‚Ø§Ù‹
                }

                // Ø·Ù„Ø¨ Ø¬Ù„Ø³Ø© WebXR AR
                console.log('Ø·Ù„Ø¨ Ø¬Ù„Ø³Ø© WebXR...');
                
                const sessionOptions = {
                    requiredFeatures: ['local', 'hit-test'],
                    optionalFeatures: ['dom-overlay'],
                    domOverlay: { 
                        root: document.g
