---
layout: default
---

<!-- وسوم مشاركة الصور والبيانات على واتساب وفيسبوك -->
<meta property="og:title" content="{{ page.meta_title | default: page.title }}">
<meta property="og:description" content="{{ page.meta_description }}">
<meta property="og:type" content="website">
<meta property="og:url" content="{{ site.url }}{{ page.url }}">
{% if page.image_file %}
<meta property="og:image" content="{{ site.url }}{{ site.baseurl }}/assets/img/properties/{{ page.image_file }}">
{% elsif page.image %}
<meta property="og:image" content="{{ site.url }}{{ page.image }}">
{% endif %}
<!-- وسوم تويتر -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="{{ site.url }}{{ site.baseurl }}/assets/img/properties/{{ page.image_file | default: page.image }}">

<div class="property-container">
    
    <!-- شريط العودة -->
    <nav class="property-nav">
        <a href="{{ '/' | relative_url }}" class="back-link">
            <i class="fas fa-arrow-right"></i> العودة للرئيسية
        </a>
        <div class="property-breadcrumb">
            <a href="{{ '/' | relative_url }}">الرئيسية</a> › 
            <a href="{{ '/properties/' | relative_url }}">عقارات للبيع</a> › 
            <span>{{ page.title | truncate: 30 }}</span>
        </div>
    </nav>
    
    <!-- العنوان الرئيسي -->
    <header class="property-header">
        <h1>{{ page.title }}</h1>
        <div class="property-meta">
            <span class="location"><i class="fas fa-map-marker-alt"></i> {{ page.location }}</span>
            <span class="price"><i class="fas fa-tag"></i> {{ page.price }}</span>
            <span class="date"><i class="far fa-calendar"></i> {{ page.date | date: "%Y/%m/%d" }}</span>
        </div>
    </header>
    
    <!-- المحتوى الرئيسي -->
    <main class="property-content">
        
        <!-- المواصفات الرئيسية -->
        <section class="property-specs">
            <h2><i class="fas fa-list-alt"></i> مواصفات العقار</h2>
            <div class="specs-grid">
                {% if page.area %}<div class="spec-item"><span class="spec-label">المساحة</span><span class="spec-value">{{ page.area }}</span></div>{% endif %}
                {% if page.rooms %}<div class="spec-item"><span class="spec-label">الغرف</span><span class="spec-value">{{ page.rooms }}</span></div>{% endif %}
                {% if page.bathrooms %}<div class="spec-item"><span class="spec-label">الحمامات</span><span class="spec-value">{{ page.bathrooms }}</span></div>{% endif %}
                {% if page.floor %}<div class="spec-item"><span class="spec-label">الدور</span><span class="spec-value">{{ page.floor }}</span></div>{% endif %}
                {% if page.finish %}<div class="spec-item"><span class="spec-label">التشطيب</span><span class="spec-value">{{ page.finish }}</span></div>{% endif %}
                {% if page.category %}
                <div class="spec-item">
                    <span class="spec-label">النوع</span>
                    <span class="spec-value">
                        {% if page.category == 'apartments' %}شقة سكنية
                        {% elsif page.category == 'offices' %}مكتب/إداري
                        {% elsif page.category == 'commercial' %}تجاري
                        {% else %}{{ page.category }}{% endif %}
                    </span>
                </div>
                {% endif %}
            </div>
        </section>
        
        <!-- التفاصيل الإضافية -->
        {% if page.extra_details %}
        <section class="property-details">
            <h2><i class="fas fa-info-circle"></i> تفاصيل إضافية</h2>
            <div class="details-content">{{ page.extra_details }}</div>
        </section>
        {% endif %}
        
        <!-- الوصف (هنا يظهر محتوى ملف الشقة الذي انشأناه) -->
        <section class="property-description">
            <div class="description-content">
                {{ content }}
            </div>
        </section>
        
        <!-- زر الاتصال الكبير (موجود مرة واحدة فقط في الـ Layout كما طلبت) -->
        <div class="property-call-action">
            <a href="tel:+201147758857" 
               class="call-button"
               onclick="trackPhoneCall('+201147758857', 'Property Page: {{ page.title }}');">
                <i class="fas fa-phone-alt"></i>
                <span>اتصل الآن للحجز: 01147758857</span>
                <small>خبير العقارات: طارق طنطاوي</small>
            </a>
        </div>
        
        <!-- شقق مشابهة (البطاقات - الهدايا) -->
        <section class="related-properties">
            <h2><i class="fas fa-home"></i> شقق مشابهة للبيع في مدينة نصر</h2>
            <div class="related-grid">
                {% assign similar = site.properties | where_exp: "item", "item.id != page.id" | sample: 3 %}
                {% for prop in similar %}
                <a href="{{ prop.url | relative_url }}" class="related-card">
                    <!-- إضافة الصورة هنا لتوحيد الهوية البصرية -->
                    <div class="related-card-img">
                        {% if prop.image_file %}
                        <img src="{{ site.baseurl }}/assets/img/properties/{{ prop.image_file }}" alt="{{ prop.title }}" loading="lazy">
                        {% else %}
                        <div class="img-placeholder"><i class="fas fa-building"></i></div>
                        {% endif %}
                    </div>
                    <div class="related-card-content">
                        <h3>{{ prop.title | truncate: 45 }}</h3>
                        <p class="related-location"><i class="fas fa-map-marker-alt"></i> {{ prop.location | truncate: 35 }}</p>
                        <p class="related-price">{{ prop.price }}</p>
                    </div>
                </a>
                {% endfor %}
            </div>
        </section>
        
    </main>
</div>

<style>
/* التنسيقات الأساسية */
.property-container { max-width: 1200px; margin: 2rem auto; padding: 0 20px; direction: rtl; }

/* بطاقات العقارات المشابهة المحدثة */
.related-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 25px; margin-top: 20px; }

.related-card {
    background: #111;
    border-radius: 15px;
    text-decoration: none;
    color: #ccc;
    border: 1px solid #333;
    transition: all 0.3s ease;
    overflow: hidden; /* لقص الصورة على زوايا البطاقة */
    display: flex;
    flex-direction: column;
}

.related-card:hover { border-color: #d4af37; transform: translateY(-8px); box-shadow: 0 12px 25px rgba(0,0,0,0.5); }

.related-card-img {
    width: 100%;
    height: 180px;
    background: #222;
    overflow: hidden;
}

.related-card-img img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.5s;
}

.related-card:hover .related-card-img img { transform: scale(1.1); }

.related-card-content { padding: 20px; }

.related-card h3 { color: #fff; margin-bottom: 10px; font-size: 1.1rem; line-height: 1.4; }

.related-location { font-size: 0.85rem; color: #888; margin-bottom: 10px; }

.related-price { color: #d4af37; font-weight: bold; font-size: 1.2rem; border-top: 1px solid #222; padding-top: 10px; }

.img-placeholder {
    width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; font-size: 3rem; color: #444;
}

/* باقي التنسيقات الأصلية للموقع */
.property-nav { display: flex; justify-content: space-between; align-items: center; padding: 15px 0; border-bottom: 1px solid #333; margin-bottom: 30px; }
.back-link { color: #d4af37; text-decoration: none; font-weight: 600; display: flex; align-items: center; gap: 8px; }
.property-header h1 { color: #fff; font-size: 2rem; margin-bottom: 15px; }
.property-meta { display: flex; gap: 15px; flex-wrap: wrap; margin-bottom: 30px; }
.property-meta span { background: rgba(255,255,255,0.05); padding: 8px 15px; border-radius: 20px; border: 1px solid #444; color: #eee; font-size: 0.9rem; }
.property-specs { background: rgba(255,255,255,0.03); padding: 25px; border-radius: 12px; margin-bottom: 30px; }
.specs-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; }
.spec-item { display: flex; justify-content: space-between; padding: 12px; background: rgba(0,0,0,0.3); border-radius: 8px; border-right: 3px solid #d4af37; }
.property-call-action { text-align: center; margin: 50px 0; }
.call-button { display: inline-flex; flex-direction: column; align-items: center; background: linear-gradient(45deg, #25D366, #128C7E); color: white; padding: 20px 50px; border-radius: 50px; text-decoration: none; font-weight: bold; border: 2px solid white; box-shadow: 0 10px 30px rgba(37,211,102,0.4); }

@media (max-width: 768px) {
    .property-header h1 { font-size: 1.5rem; }
    .related-grid { grid-template-columns: 1fr; }
    .property-nav { flex-direction: column; align-items: flex-start; gap: 10px; }
}
</style>

<script>
// دالة تتبع المكالمات
function trackPhoneCall(phoneNumber, label) {
    if (typeof gtag === 'function') {
        gtag('event', 'phone_click', {
            'event_category': 'Phone',
            'event_label': label,
            'phone_number': phoneNumber
        });
    }
    console.log('Call tracked: ' + label);
}
    </script>
